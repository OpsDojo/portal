<main class="min-h-screen bg-gray-50 flex items-center justify-center">
  <div class="max-w-md mx-auto bg-white rounded-lg shadow-lg p-6">
    @if (!msal.isIframe && !msal.loginDisplay) {
      <button
        type="button"
        (click)="msal.login()"
        class="w-full bg-blue-600 hover:bg-blue-700 text-white font-semibold py-2 px-4 rounded-lg transition-colors"
      >
        Log in
      </button>
    }
    @if (!msal.isIframe && msal.loginDisplay) {
      <div class="space-y-4">
        <button
          type="button"
          (click)="msal.logout()"
          class="w-full bg-red-600 hover:bg-red-700 text-white font-semibold py-2 px-4 rounded-lg transition-colors"
        >
          Log out
        </button>
        <div>
          <h2 class="text-xl font-bold text-gray-800 mb-3">Forecast:</h2>
          <div class="space-y-2">
            @for (f of $forecast | async; track f.date) {
              <div class="bg-gray-100 rounded-lg p-3">
                <p class="text-gray-700">
                  {{ f.date }} - <span class="font-semibold">{{ f.temperatureC }}Â°C</span>
                </p>
              </div>
            }
          </div>
        </div>
      </div>
    }
  </div>
</main>

<!--This is to avoid reload during acquireTokenSilent() because of hidden iframe -->
@if (!msal.isIframe) {
  <router-outlet />
}
